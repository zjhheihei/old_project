/*********************************************************************************************************
*
*	模块名称 : 液晶模块
*	文件名称 : BSP_LCD.c
*	版    本 : V1.0
*	说    明 : 1、模块独立，不访问其他任何模块
*                  2、供Mod_LCD调用
*                  3、做硬件配置
*	修改记录 :
*		版本号  日期        作者     说明
*		V1.0   2018-11-12  zhoujh  正式发布
*	Copyright (C), 2015-2020,   menredGroup
*       编译环境 ：IAR FOR STM8 V2.2      
*********************************************************************************************************/



//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
#include ".\SnailDataTypedef.h"
#include ".\SnailMacro.h"
#include ".\iostm8l052r8.h"
#include "intrinsics.h"
//------------------------------E N D-------------------------------------------


//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//***********************LCD数据缓冲区全局变量**********************************
//------------------------------E N D-------------------------------------------
//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//****************************LCD选通端*****************************************
void bsp_lcd_segConfigure(void)
{   
    LCD_PM0 = 0xFE;    //S1  - S8
    LCD_PM1 = 0xFF;    //S8  - S15
    LCD_PM2 = 0x1F;    //S16 - S20
    //LCD_PM4 = 0xF0;    //S36 - S39
}
//------------------------------E N D-------------------------------------------

//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//*****************************LCD配置******************************************

void bsp_lcd_configure(void)
{ 
   CLK_PCKENR2_bit.PCKEN23 = 1;
   CLK_CRTCR |= 0x04;   //RTC采用内部LSI,不分频
   LCD_FRQ   |= 0x00;   //- Prescaler = 4 - Divider = 16  
   LCD_CR1   |= 0x06;   //0000 0110   1/4Duty 1/3bias
   //LCD_CR2   |= 0xe6;   //3.0V 
   LCD_CR2   |= 0xfe;    //3.4V 
   LCD_CR3   |= 0x01;   //死区事件一个相位周期 
   bsp_lcd_segConfigure();   
   LCD_CR3   |= 0x40;     
}


//void bsp_lcd_buf(INT8U *buf)
//{
//    INT8U i = 0;
//    volatile INT8U *pt;
//    pt = &LCD_RAM0;
//    for(;i < 22;i++)
//    {
//        *pt = buf[i];
//        pt++;
//    }
//}

//-----------------------——--BSP_LCD.c--END-------------------------------------
