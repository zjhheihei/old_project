/*********************************************************************************************************
*
*	模块名称 : 液晶模块
*	文件名称 : BSP_LCD.c
*	版    本 : V1.0
*	说    明 : 1、模块独立，不访问其他任何模块
*                  2、供Mod_LCD调用
*                  3、做硬件配置
*	修改记录 :
*		版本号  日期        作者     说明
*		V1.0   2018-07-2  zhoujh  正式发布
*	Copyright (C), 2015-2020,   menredGroup
*       编译环境 ：IAR FOR STM8 V2.2      
*********************************************************************************************************/



//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
#include "DataTypedef.h"
#include "iostm8l052r8.h"
#include "intrinsics.h"
//------------------------------E N D-------------------------------------------



//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//*****************************LCD配置******************************************
void BSP_LCD_DisSetAll(void)
{
    volatile INT8U *Point;
    INT8U i;
    Point = &LCD_RAM0; 
    
    for(i=0;i<23;i++)
    {
        *Point = 0xff;
         Point++;
    }
}
//------------------------------E N D-------------------------------------------



//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//*****************************LCD配置******************************************
void BSP_LCD_DisClrAll(void)
{
    volatile INT8U *Point;
    INT8U i;
    Point = &LCD_RAM0; 
    
    for(i=0;i<23;i++)
    {
        *Point = 0x00;
         Point++;
    }
}
//------------------------------E N D-------------------------------------------



//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//****************************LCD选通端*****************************************
void BSP_LCD_SegEnable(void)
{   
    LCD_PM0 = 0xf0;    //S5-S7 
    LCD_PM1 = 0xfe;    //S10-S15
    LCD_PM2 = 0x33;    //S16-S17  ,S20-S21
    LCD_PM4 = 0xf0;    //S36-S39
}
//------------------------------E N D-------------------------------------------



//++++++++++++++++++++++++++++++start+++++++++++++++++++++++++++++++++++++++++++
//*****************************LCD配置******************************************
void BSP_LCD_Configure(void)
{ 
   //CLK_PCKENR2_PCKEN22 = 1;
   CLK_PCKENR2_bit.PCKEN23 = 1;
   CLK_CRTCR |= 0x04;   //RTC采用内部LSI,不分频
   LCD_FRQ   |= 0x00;   //- Prescaler = 4 - Divider = 16  
   LCD_CR1   |= 0x06;   //0000 0110   1/4Duty 1/3bias
   LCD_CR2   |= 0xee;  
   LCD_CR3   |= 0x00;   //死区事件一个相位周期 
   BSP_LCD_SegEnable();   
   LCD_CR3   |= 0x40;    
   
}
//------------------------------E N D-------------------------------------------



//-----------------------BSP_Keyboard.c--END------------------------------------
